#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h> //open
#include <unistd.h> // write / redad
void coder();
void decoder();


int main(int argc, char ** argv){
	printf("%d\n",' ' );
	coder("secret.txt",10);
	decoder("secretcache.txt",10);
}



void coder(char* chemin,int b){	
	int fe, fs;
	fe = open(chemin,O_RDONLY,0777);
	fs = open("secretcache.txt",O_CREAT | O_WRONLY,0777);
	char buffer; 
	while(read(fe,&buffer,1)>0){
		if(buffer == 32){
			write(fs,&buffer,1);
		} else { 
		if(65 <= buffer &&  buffer <=90){
			buffer += b%26;
			if (buffer > 90)
				buffer-=26;
			write(fs,&buffer,1);
		} 
		}		
	}
		
	close(fe);
	close(fs);
}


void decoder(char* chemin,int b){	
	int fe, fs;
	fe = open(chemin,O_RDONLY,0777);
	fs = open("secretdecoder.txt",O_CREAT | O_WRONLY,0777);
	char buffer; 
	while(read(fe,&buffer,1)>0){
		if(buffer == 32){
			write(fs,&buffer,1);
		} else { 
			if(65 <= buffer &&  buffer <=90){
				buffer -= b%26;
				if (buffer < 65)
					buffer+=26;
				write(fs,&buffer,1);
			} 
		}

	}
		
	close(fe);
	close(fs);
}


